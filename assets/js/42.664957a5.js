(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{447:function(t,e,a){"use strict";a.r(e);var n=a(31),o=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"payjoin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#payjoin"}},[t._v("#")]),t._v(" PayJoin")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#sending-payjoin-step-by-step"}},[t._v("Sending PayJoin step-by-step")])]),a("li",[a("a",{attrs:{href:"#the-goal-of-payjoin"}},[t._v("The goal of PayJoin")])]),a("li",[a("a",{attrs:{href:"#coordination"}},[t._v("Coordination")])]),a("li",[a("a",{attrs:{href:"#fallback-transaction"}},[t._v("Fallback transaction")])]),a("li",[a("a",{attrs:{href:"#payjoin-transaction"}},[t._v("PayJoin transaction")])]),a("li",[a("a",{attrs:{href:"#advantages-of-payjoin"}},[t._v("Advantages of PayJoin")])])])]),a("p"),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"sending-payjoin-step-by-step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sending-payjoin-step-by-step"}},[t._v("#")]),t._v(" Sending PayJoin step-by-step")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Load a wallet and open the "),a("code",[t._v("Send")]),t._v(" tab.")])]),t._v(" "),a("li",[a("p",[t._v("Request from the receiver a "),a("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0021.mediawiki",target:"_blank",rel:"noopener noreferrer"}},[t._v("BIP21 Bitcoin URI"),a("OutboundLink")],1),t._v(" with the flag "),a("code",[t._v("pj=")]),t._v(" and paste it into the address field of the "),a("code",[t._v("Send")]),t._v(" tab.\n(E.g. "),a("code",[t._v("bitcoin:tb1q0382a3m2jzvyk5lkea5h5jcht88xa6l0jufgwx?amount=0.00010727&pj=https://payjoin.test.kukks.org/BTC/pj")]),t._v(")")])]),t._v(" "),a("li",[a("p",[t._v("Select the coins you want to send.")])]),t._v(" "),a("li",[a("p",[t._v("Verify the information is correct, type in the password, and press "),a("code",[t._v("Send")]),t._v(".")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/PayJoinSend.png",alt:"Send Bitcoin PayJoin transaction in Wasabi Wallet",title:"Send Bitcoin PayJoin transaction in Wasabi Wallet"}})]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("The success of a PayJoin transaction is not something that depends on Wasabi.")]),t._v(" "),a("p",[t._v("It may happen that the transaction is broadcast with success, but that it is not a PayJoin.\nThis can happen for several reasons including:")]),t._v(" "),a("ul",[a("li",[t._v("The receiver did not have any utxos to contribute towards a PayJoin.")]),t._v(" "),a("li",[t._v("Your wallet does not use the same address format as the receiver's.")]),t._v(" "),a("li",[t._v("The PayJoin server is not available.")])])]),t._v(" "),a("h2",{attrs:{id:"the-goal-of-payjoin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-goal-of-payjoin"}},[t._v("#")]),t._v(" The goal of PayJoin")]),t._v(" "),a("p",[t._v("PayJoin is a collaborative transaction between the sender and the receiver of a payment, for example the merchant and the customer.\nThe goal of the protocol is to break the common input ownership heuristic, while making it difficult to fingerprint that the transaction is in fact a CoinJoin.\nFurther, it reduces the transaction fees paid by the merchant due to consolidation of coins.")]),t._v(" "),a("h2",{attrs:{id:"coordination"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#coordination"}},[t._v("#")]),t._v(" Coordination")]),t._v(" "),a("p",[t._v("The coordination of this CoinJoin is done with the PayToEndPoint [P2EP] concept.\nThe receiver is reachable over the internet, either over a Tor onion service or clearnet IP address.\nThe link is included in a BIP21 Bitcoin URI, and is provided to the sender as the payment invoice.\nThe sender uses this onion service or IP address to connect to the server of the receiver and communicate the further protocol.\nThe coordination is usually done within seconds, and will abort to the fallback transaction after some time if the connection breaks.")]),t._v(" "),a("h2",{attrs:{id:"fallback-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fallback-transaction"}},[t._v("#")]),t._v(" Fallback transaction")]),t._v(" "),a("p",[t._v("In the very first request to the receiving server, the sender provides a finalized signed transaction which has only the inputs of the sender, like any other Bitcoin transaction.\nThe inputs are only from the sender.\nThe outputs are the address of the receiver, as well as the change address of the sender.\nFor example here, Alice pays Bob "),a("code",[t._v("0.2 bitcoin")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Alice input   1 bitcoin   --\x3e   Bob output            0.2 bitcoin\n                                Alice change output   0.8 bitcoin\n")])])]),a("p",[t._v("Both the sender and the receiver "),a("em",[t._v("could")]),t._v(" broadcast this transaction.")]),t._v(" "),a("h2",{attrs:{id:"payjoin-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#payjoin-transaction"}},[t._v("#")]),t._v(" PayJoin transaction")]),t._v(" "),a("p",[t._v("The receiving server responds to this initial proposal, with a transaction that adds more inputs to the transaction.\nThus, the output belonging to the receiver increases in value, above the value that the payment amount is due.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Alice input   1 bitcoin   --\x3e   Bob output            0.7 bitcoin\nBob input     0.5 bitcoin --\x3e   Alice change output   0.8 bitcoin\n")])])]),a("p",[t._v("The sender broadcasts this transaction to the Bitcoin network.")]),t._v(" "),a("h2",{attrs:{id:"advantages-of-payjoin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advantages-of-payjoin"}},[t._v("#")]),t._v(" Advantages of PayJoin")]),t._v(" "),a("p",[t._v("First and foremost, the common input ownership heuristic is broken, meaning that the inputs do not belong to one single entity, but to several of them.\nThis breaks one of the most important assumptions of transaction surveillance companies.\nContrarily to other CoinJoin implementations, the outputs are not of equal value, so it is not obvious that this transaction is in fact a CoinJoin.")]),t._v(" "),a("p",[t._v("Further, the outputs do not reflect the actual value of the transaction.\nIn our example, the economic transfer is of "),a("code",[t._v("0.2 bitcoin")]),t._v(" from Alice to Bob, but the outputs are worth "),a("code",[t._v("0.7 bitcoin")]),t._v(" and "),a("code",[t._v("0.8 bitcoin")]),t._v(".\nThis is obfuscating the actual amount payed.")]),t._v(" "),a("p",[t._v("Finally, the receiver is consolidating his coins, thus saving on future transaction fees.\nWithout the PayJoin, the receiver would have two coins, worth "),a("code",[t._v("0.2 bitcoin")]),t._v(" and "),a("code",[t._v("0.5 bitcoin")]),t._v(", and he would have to pay twice the transaction fee to spend these coins.\nBut because of using PayJoin, he only has one coin, worth "),a("code",[t._v("0.7 bitcoin")]),t._v(", thus reducing his future transaction costs when spending this coin.")])])}),[],!1,null,null,null);e.default=o.exports}}]);