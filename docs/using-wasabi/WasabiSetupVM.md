---
{
  "title": "Wasabi Setup in Virtual Machines",
  "description": "A step by step guide on how to use Wasabi Wallet in virtual machines like Qubes OS or VirtualBox. This is the Wasabi documentation, an archive of knowledge about the open-source, non-custodial and privacy-focused Bitcoin wallet for desktop."
}
---

# Wasabi Setup in Virtual Machines

[[toc]]

## Qubes

[Qubes](https://www.qubes-os.org/) is a free and open-source security-oriented operating system meant for single-user desktop computing.
Qubes OS leverages xen-based virtualization to allow for the creation and management of isolated virtual machines (VMs) called qubes.
This is valuable for users of high security software like Wasabi Wallet, and especially useful for testers of cutting edge developer branches.
There is a separation of the virtual machines running Wasabi on testnet, and those running on mainnet with valuable private keys.
If a reviewer compiles a malicious developer branch, then his mainnet private keys are secure in a different qube.

This is a step-by-step guide on how to properly compile Wasabi Wallet from source in independent qubes.
For tutorials on how to [download](https://www.qubes-os.org/downloads/) and [install](https://www.qubes-os.org/doc/installation-guide/) Qubes, please see their exhaustive documentation.

### Generate Template VM

The dependencies to [compile Wasabi from source](/using-wasabi/BuildSource.md) will be downloaded and installed in a new template VM, which is generated by cloning the Debian template from the `dom0` terminal.

```sh
[user@dom0 ~]$ qvm-clone template-debian-10 template-wasabi
```

### Install Dependencies

Start the gnome-terminal of `template-wasabi`.

```sh
[user@dom0 ~]$ qvm-run -a template-wasabi gnome-terminal
```

Update the `template-wasabi`.

```sh
[user@template-wasabi ~]$ sudo apt update
[user@template-wasabi ~]$ sudo apt upgrade
[user@template-wasabi ~]$ sudo apt dist-upgrade
```

Install [.NET Core ${dotnetVersion} SDK](https://www.microsoft.com/net/download) for "Building Apps" in `template-wasabi`.

:::tip Optional for privacy
You can disable .NET's telemetry, which is sending some usage information to Microsoft:

```sh
[user@template-wasabi ~]$ export DOTNET_CLI_TELEMETRY_OPTOUT=1
```

:::

If you need to update .NET Core, then do it in this VM.
Now shut down `template-wasabi`.

```sh
[user@dom0 ~]$ qvm-shutdown template-wasabi
```

### Generate App VM

Create a new App VM `source-wasabi` which is based on `template-wasabi`.
This qube will be used to download, compile and run the Wasabi source code.
This way you can create multiple App VMs for different testing purposes.
All these App VMs will be updated when you update `template-wasabi`.

```sh
[user@dom0 ~]$ qvm-create source-wasabi --template template-wasabi --label red
```

### Compile and Run Wasabi

Start the gnome-terminal of `source-wasabi`.

```sh
[user@dom0 ~]$ qvm-run -a source-wasabi gnome-terminal
```

Clone & build Wasabi

```sh
[user@source-wasabi ~]$ git clone https://github.com/zkSNACKs/WalletWasabi.git
[user@source-wasabi ~]$ cd WalletWasabi/WalletWasabi.Gui
[user@source-wasabi ~]$ dotnet build
```

Add the development branches to your git.

```sh
[user@source-wasabi ~]$ git remote add nopara73 https://github.com/nopara73/WalletWasabi
[user@source-wasabi ~]$ git fetch nopara73
[user@source-wasabi ~]$ git checkout <development branch>
```

Pull the latest commits and compile from source.

```sh
[user@source-wasabi ~]$ git pull
[user@source-wasabi ~]$ dotnet run
```

### Install Package in App VM

Alternatively, you can also install the package in a new App VM, this is a stable version suitable to use on mainnet and is separated from the development App VM.
There are no additional dependencies required, so the App VM can be based on `template-debian-10` directly.

```sh
[user@dom0 ~]$ qvm-create package-wasabi --template template-debian-10 --label red
[user@dom0 ~]$ qvm-run -a package-wasabi gnome-terminal
```

[Download, verify and install](/using-wasabi/InstallPackage.md#debian-and-ubuntu) the latest `Wasabi-${currentVersion}.deb` package in `package-wasabi`, then start Wasabi.

```sh
[user@package-wasabi ~]$ wassabee
```
